var FOREST_WIDGET_CREATOR=function(){function p(){}function r(c,k){if(c&&(c.data.userSelected||((c.input.checked=k)?c.span.classList.add("included"):c.span.classList.remove("included")),c.data.parent))return r(c.data.parent,k)}function t(c,k){var g=[];for(g.push(c);0<g.length;){var b=g.shift();b.data.userSelected||((b.input.checked=k)?b.span.classList.add("included"):b.span.classList.remove("included"));for(c=0;c<b.data.children.length;c++)g.push(b.data.children[c])}}function u(c,k,g,b){var d=this,
h;this.input=document.createElement("input");this.depth=0;this.data={id:-1,node:this,label:c,parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1};k&&(this.data.id=k);this.element=document.createElement("div");this.element.className="node";g&&(this.data.parent=g,this.depth=g.depth+15,this.element.style.textIndent=this.depth+"px");this.input.id="node-"+this.data.id;this.input.type="checkbox";this.input.onchange=function(){d.data.userSelected=this.checked;d.data.includeAncestors=
b.includeAncestors;d.data.includeDescendants=b.includeDescendants;d.data.includeAncestors&&r(d.data.parent,d.data.userSelected);d.data.includeDescendants&&t(d,d.data.userSelected);if(d.data.userSelected){d.span.classList.add("selected");for(h=0;h<b.userSelectedNodes.length;h++)if(b.userSelectedNodes[h]===d.data)return;b.userSelectedNodes.push(d.data)}else for(d.span.classList.remove("included"),d.span.classList.remove("selected"),d.data.includeAncestors=b.includeAncestors,d.data.includeDescendants=
b.includeDescendants,h=0;h<b.userSelectedNodes.length;h++)if(b.userSelectedNodes[h]===d.data){b.userSelectedNodes.splice(h,1);break}};this.span=document.createElement("span");this.span.innerHTML=this.data.label;this.span.classList.add("spanLabel");this.span.classList.remove("included");this.span.classList.remove("selected");this.element.appendChild(this.input);this.element.appendChild(this.span)}function w(c,k,g){var b=this;(function(){function d(a,b){var d=document.createElement("div"),c=document.createElement("input");
c.type="checkbox";c.value=a;d.style.textIndent="10px";c.onchange="ancestors"===a?function(){e.includeAncestors=c.checked}:function(){e.includeDescendants=c.checked};d.appendChild(c);a=document.createElement("span");a.classList.add("spanLabel");a.innerHTML=b;d.appendChild(a);return d}function h(){n.style.height=l.clientHeight-(m.offsetHeight+(l.offsetHeight-l.clientHeight<<1))+"px"}var p=document.getElementById(c),l=document.createElement("div"),n=document.createElement("form"),q=document.createElement("div"),
m=document.createElement("form"),f=document.createElement("div"),v=[],e={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,width:k?k:"100%",height:g?g:"100%",widgetBody:l,optionsBody:m,forestContainer:n};l.className="widget-body";n.className="forest-container";q.className="forest-body";m.className="options-body";l.style.width=e.width;l.style.height=e.height;(function(){var a=document.createElement("div"),b=document.createElement("span");b.innerHTML="For next selection:";a.appendChild(b);
f.appendChild(a)})();f.appendChild(d("ancestors","Include ancestors"));f.appendChild(d("descendants","Include descendants"));f.style.display="inline-block";f.style.width="50%";m.appendChild(f);f=document.createElement("div");f.appendChild(function(){var a=document.createElement("button");a.innerHTML="Clear all";a.type="button";a.classList.add("clear-button");a.classList.add("btn");a.classList.add("btn-sm");a.classList.add("btn-primary");a.onclick=function(){b.clearAll()};return a}());f.style.width=
"50%";f.style.display="inline-block";f.style.textAlign="right";f.style.verticalAlign="top";f.style.marginTop="2px";m.appendChild(f);n.appendChild(q);l.appendChild(n);l.appendChild(m);p.appendChild(l);window.addEventListener("resize",h);b.clearAll=function(){var a;for(a=0;a<e.userSelectedNodes.length;a++)e.userSelectedNodes[a].node.data.userSelected=!1,e.userSelectedNodes[a].node.input.checked=!1,e.userSelectedNodes[a].node.span.classList.remove("included"),e.userSelectedNodes[a].node.span.classList.remove("selected"),
r(e.userSelectedNodes[a].node,!1),t(e.userSelectedNodes[a].node,!1);e.userSelectedNodes=[]};b.createNode=function(a){return a.id?new u(a.label,a.id,a.parent,e):new u(a,null,null,e)};b.addNodeByReference=function(a,b){q.appendChild(a.element);b?(a.data.parent=b,a.depth=b.depth+15,a.element.style.textIndent=a.depth+"px",b.data.children.push(a),b.element.appendChild(a.element)):v.push(a);h()};b.addNode=function(a){a=b.createNode(a);q.appendChild(a.element);a.data.parent?(a.data.parent.data.children.push(a),
a.data.parent.element.appendChild(a.element)):v.push(a);h();return a};b.getModes=function(){return{includeAncestors:e.includeAncestors,includeDescendants:e.includeDescendants}};b.getUserSelectedNodes=function(){return e.userSelectedNodes}})()}p.prototype.create=function(c,k,g){return c?new w(c,k,g):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)};return new p}();
