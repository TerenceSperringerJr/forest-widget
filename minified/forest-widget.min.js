var FOREST_WIDGET_CREATOR=function(){function n(){}function q(d,h){if(d&&(d.data.userSelected||((d.input.checked=h)?d.span.classList.add("included"):d.span.classList.remove("included")),d.data.parent))return q(d.data.parent,h)}function r(d,h){var e=[];for(e.push(d);0<e.length;){var b=e.shift();b.data.userSelected||((b.input.checked=h)?b.span.classList.add("included"):b.span.classList.remove("included"));for(d=0;d<b.data.children.length;d++)e.push(b.data.children[d])}}function v(d){var h=(new Date).getTime(),
e=255,b=0,a=0,f=setInterval(function(){var f=(new Date).getTime();0<e&&0===a?(e-=3,b+=3):0<b&&0===e?(a+=3,b-=3):(e+=3,a-=3);85<f-h&&(h=f,d.style.color="rgb("+e+", "+b+", "+a+")",d.style.bordercolor="rgb("+(255-e)+", "+(255-b)+", "+(255-a)+")",d.style.fontWeight="bold")},0);setTimeout(function(){clearInterval(f);d.style.borderColor="";d.style.color="";d.style.fontWeight=""},1E3)}function t(d,h,e,b){var a=this,f;this.input=document.createElement("input");this.depth=0;this.data={id:-1,node:this,label:d,
parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1};h&&(this.data.id=h);this.element=document.createElement("div");this.element.className="node";e&&(this.data.parent=e,this.depth=e.depth+15,this.element.style.textIndent=this.depth+"px");this.input.id="node-"+this.data.id;this.input.type="checkbox";this.input.onchange=function(){a.data.userSelected=this.checked;a.data.includeAncestors=b.includeAncestors;a.data.includeDescendants=b.includeDescendants;v(b.optionsBody);
a.data.includeAncestors&&q(a.data.parent,a.data.userSelected);a.data.includeDescendants&&r(a,a.data.userSelected);if(a.data.userSelected){a.span.classList.add("selected");for(f=0;f<b.userSelectedNodes.length;f++)if(b.userSelectedNodes[f]===a.data)return;b.userSelectedNodes.push(a.data)}else for(a.span.classList.remove("included"),a.span.classList.remove("selected"),a.data.includeAncestors=b.includeAncestors,a.data.includeDescendants=b.includeDescendants,f=0;f<b.userSelectedNodes.length;f++)if(b.userSelectedNodes[f]===
a.data){b.userSelectedNodes.splice(f,1);break}};this.span=document.createElement("span");this.span.innerHTML=this.data.label;this.span.classList.remove("included");this.span.classList.remove("selected");this.element.appendChild(this.input);this.element.appendChild(this.span)}function w(d,h,e){var b=this;(function(){function a(c,b){var d=document.createElement("div"),a=document.createElement("input");a.type="checkbox";a.value=c;a.onchange="ancestors"===c?function(){g.includeAncestors=a.checked}:function(){g.includeDescendants=
a.checked};d.appendChild(a);c=document.createElement("span");c.innerHTML=b;d.appendChild(c);return d}function f(){m.style.height=k.clientHeight-(l.offsetHeight+(k.offsetHeight-k.clientHeight<<1))+"px"}var n=document.getElementById(d),k=document.createElement("div"),m=document.createElement("form"),p=document.createElement("div"),l=document.createElement("form"),u=[],g={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,width:h?h:"100%",height:e?e:"100%",widgetBody:k,optionsBody:l,forestContainer:m};
k.className="widget-body";m.className="forest-container";p.className="forest-body";l.className="options-body";k.style.width=g.width;k.style.height=g.height;l.appendChild(a("ancestors","Include ancestors"));l.appendChild(a("descendants","Include descendants"));l.appendChild(function(){var c=document.createElement("div"),a=document.createElement("button");a.innerHTML="Clear";a.type="button";a.onclick=function(){b.clearAll()};c.appendChild(a);return c}());k.appendChild(l);m.appendChild(p);k.appendChild(m);
n.appendChild(k);window.addEventListener("resize",f);b.clearAll=function(){var c;for(c=0;c<g.userSelectedNodes.length;c++)g.userSelectedNodes[c].node.input.checked=!1,g.userSelectedNodes[c].node.span.classList.remove("included"),g.userSelectedNodes[c].node.span.classList.remove("selected"),q(g.userSelectedNodes[c].node,!1),r(g.userSelectedNodes[c].node,!1);g.userSelectedNodes=[]};b.createNode=function(c){return c.id?new t(c.label,c.id,c.parent,g):new t(c,null,null,g)};b.addNodeByReference=function(c,
a){p.appendChild(c.element);a?(c.data.parent=a,c.depth=a.depth+15,c.element.style.textIndent=c.depth+"px",a.data.children.push(c),a.element.appendChild(c.element)):u.push(c);f()};b.addNode=function(a){a=b.createNode(a);p.appendChild(a.element);a.data.parent?(a.data.parent.data.children.push(a),a.data.parent.element.appendChild(a.element)):u.push(a);f();return a};b.getModes=function(){return{includeAncestors:g.includeAncestors,includeDescendants:g.includeDescendants}};b.getUserSelectedNodes=function(){return g.userSelectedNodes}})()}
n.prototype.create=function(d,h,e){return d?new w(d,h,e):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)};return new n}();
