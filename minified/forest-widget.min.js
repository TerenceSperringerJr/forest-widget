var FOREST_WIDGET_CREATOR=function(){function q(){}function t(c,g){if(c&&(c.data.userSelected||((c.input.checked=g)?c.span.classList.add("included"):c.span.classList.remove("included")),c.data.parent))return t(c.data.parent,g)}function v(c,g){var f=[];for(f.push(c);0<f.length;){var b=f.shift();b.data.userSelected||((b.input.checked=g)?b.span.classList.add("included"):b.span.classList.remove("included"));for(c=0;c<b.data.children.length;c++)f.push(b.data.children[c])}}function w(c,g,f,b){var d=this,
h;this.input=document.createElement("input");this.depth=0;this.data={id:-1,node:this,label:c,parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1};g&&(this.data.id=g);this.element=document.createElement("div");this.element.className="node";f&&(this.data.parent=f,this.depth=f.depth+15,this.element.style.textIndent=this.depth+"px");this.input.id="node-"+this.data.id;this.input.type="checkbox";this.input.onchange=function(){d.data.userSelected=this.checked;d.data.includeAncestors=
b.includeAncestors;d.data.includeDescendants=b.includeDescendants;d.data.includeAncestors&&t(d.data.parent,d.data.userSelected);d.data.includeDescendants&&v(d,d.data.userSelected);if(d.data.userSelected){d.span.classList.add("selected");for(h=0;h<b.userSelectedNodes.length;h++)if(b.userSelectedNodes[h]===d.data)return;b.userSelectedNodes.push(d.data)}else for(d.span.classList.remove("included"),d.span.classList.remove("selected"),d.data.includeAncestors=b.includeAncestors,d.data.includeDescendants=
b.includeDescendants,h=0;h<b.userSelectedNodes.length;h++)if(b.userSelectedNodes[h]===d.data){b.userSelectedNodes.splice(h,1);break}};this.span=document.createElement("span");this.span.innerHTML=this.data.label;this.span.classList.add("spanLabel");this.span.classList.remove("included");this.span.classList.remove("selected");this.element.appendChild(this.input);this.element.appendChild(this.span)}function A(c,g,f){var b=this;(function(){function d(a,b){var d=document.createElement("div"),c=document.createElement("input");
c.type="checkbox";c.value=a;d.style.textIndent="10px";c.onchange="ancestors"===a?function(){e.includeAncestors=c.checked}:function(){e.includeDescendants=c.checked};d.appendChild(c);a=document.createElement("span");a.classList.add("spanLabel");a.innerHTML=b;d.appendChild(a);return d}function h(){x||(x=!0,m.style.display="inline-block",y.style.right="10%",l.style.textAlign="right")}function u(){p.style.height=k.clientHeight-(n.offsetHeight+(k.offsetHeight-k.clientHeight<<1))+"px"}var q=document.getElementById(c),
k=document.createElement("div"),p=document.createElement("form"),r=document.createElement("div"),n=document.createElement("form"),m=document.createElement("div"),l=document.createElement("div"),x=!1,y=function(){var a=document.createElement("button");a.innerHTML="Clear all";a.type="button";a.classList.add("clear-button");a.classList.add("btn");a.classList.add("btn-sm");a.classList.add("btn-primary");a.onclick=function(){b.clearAll()};return a}(),z=[],e={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,
width:g?g:"100%",height:f?f:"100%",widgetBody:k,optionsBody:n,forestContainer:p};k.className="widget-body";p.className="forest-container";r.className="forest-body";n.className="options-body";k.style.width=e.width;k.style.height=e.height;(function(){var a=document.createElement("div"),b=document.createElement("span");b.innerHTML="For next selection:";a.appendChild(b);m.appendChild(a)})();p.appendChild(r);k.appendChild(p);m.appendChild(d("ancestors","Include ancestors"));m.appendChild(d("descendants",
"Include descendants"));m.style.display="none";m.style.width="50%";n.appendChild(m);l=document.createElement("div");l.appendChild(y);l.style.width="50%";l.style.display="inline-block";l.style.verticalAlign="top";l.style.marginTop="2px";n.appendChild(l);k.appendChild(n);q.appendChild(k);window.addEventListener("resize",u);b.clearAll=function(){var a;for(a=0;a<e.userSelectedNodes.length;a++)e.userSelectedNodes[a].node.data.userSelected=!1,e.userSelectedNodes[a].node.input.checked=!1,e.userSelectedNodes[a].node.span.classList.remove("included"),
e.userSelectedNodes[a].node.span.classList.remove("selected"),t(e.userSelectedNodes[a].node,!1),v(e.userSelectedNodes[a].node,!1);e.userSelectedNodes=[]};b.createNode=function(a){return a.id?new w(a.label,a.id,a.parent,e):new w(a,null,null,e)};b.addNodeByReference=function(a,b){r.appendChild(a.element);b?(a.data.parent=b,a.depth=b.depth+15,a.element.style.textIndent=a.depth+"px",b.data.children.push(a),b.element.appendChild(a.element),h()):z.push(a);u()};b.addNode=function(a){a=b.createNode(a);r.appendChild(a.element);
a.data.parent?(a.data.parent.data.children.push(a),a.data.parent.element.appendChild(a.element),h()):z.push(a);u();return a};b.getModes=function(){return{includeAncestors:e.includeAncestors,includeDescendants:e.includeDescendants}};b.getUserSelectedNodes=function(){return e.userSelectedNodes}})()}q.prototype.create=function(c,g,f){return c?new A(c,g,f):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)};return new q}();
