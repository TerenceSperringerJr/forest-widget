var FOREST_WIDGET_CREATOR=function(){function r(){}function t(a,b){if(a&&((a.ancestorsInput.checked=b)?a.rowDiv.classList.add("included"):a.descendantsInput.checked||a.rowDiv.classList.remove("included"),a.data.parent))return t(a.data.parent,b)}function u(a,b){var d=[],c;for(c=0;c<a.length;c++)d.push(a[c]);for(;0<d.length;)for(a=d.shift(),b(a),c=0;c<a.data.children.length;c++)d.push(a.data.children[c])}function w(a,b){function d(){for(e=0;e<b.userSelectedNodes.length;e++)if(b.userSelectedNodes[e]===
a.data)return;b.userSelectedNodes.push(a.data)}function c(){for(e=0;e<b.userSelectedNodes.length;e++)if(b.userSelectedNodes[e]===a.data){b.userSelectedNodes.splice(e,1);break}}var e,h=document.createElement("span"),m=document.createElement("span"),f=document.createElement("span");h.classList="ancestors";m.classList="descendants";f.classList="self";a.span=document.createElement("span");a.rowDiv=document.createElement("div");a.spanDiv=document.createElement("div");a.inputDiv=document.createElement("div");
a.inputDiv.classList.add("checkbox-div");a.spanDiv.classList.add("span-div");a.ancestorsInput=document.createElement("input");a.ancestorsInput.hidden=b.headerBody.hidden;a.descendantsInput=document.createElement("input");a.descendantsInput.hidden=b.headerBody.hidden;a.selfInput=document.createElement("input");a.span.innerHTML=a.data.label;a.ancestorsInput.type="checkbox";a.ancestorsInput.disabled=!0;a.ancestorsInput.onchange=function(){a.data.includeAncestors=a.ancestorsInput.checked;t(a,a.data.includeAncestors);
a.data.includeAncestors?d():a.data.userSelected||a.data.includeDescendants||c()};a.descendantsInput.type="checkbox";a.descendantsInput.disabled=!0;a.descendantsInput.onchange=function(){a.data.includeDescendants=a.descendantsInput.checked;var b=a.data.includeDescendants,e,f=[];for(f.push(a);0<f.length;){var g=f.shift();(g.descendantsInput.checked=b)?g.rowDiv.classList.add("included"):g.ancestorsInput.checked||g.rowDiv.classList.remove("included");for(e=0;e<g.data.children.length;e++)f.push(g.data.children[e])}a.data.includeDescendants?
d():a.data.userSelected||a.data.includeAncestors||c()};a.selfInput.id="node-"+a.data.id;a.selfInput.type="checkbox";a.selfInput.value=a.data.id;a.selfInput.onchange=function(){a.data.userSelected=this.checked;a.data.userSelected?(d(),a.rowDiv.classList.add("selected")):a.data.includeAncestors||a.data.includeDescendants||(c(),a.rowDiv.classList.remove("selected"))};h.appendChild(a.ancestorsInput);m.appendChild(a.descendantsInput);f.appendChild(a.selfInput);a.inputDiv.appendChild(h);a.inputDiv.appendChild(m);
a.inputDiv.appendChild(f);a.spanDiv.appendChild(a.span);a.rowDiv.appendChild(a.inputDiv);a.rowDiv.appendChild(a.spanDiv);a.element.appendChild(a.rowDiv)}function q(a,b){for(var d=[],c,e,h=[];a.data.parent;)a=a.data.parent;b.forest[b.forest.length-1]===a?d.push(""):d.push("&#9475;");for(b=0;b<a.data.children.length;b++)h.push(a.data.children[b]);for(;0<h.length;){a=h.pop();for(e=a.data.parent;d.length<a.depth+1;)d.push("&emsp;");c="";for(b=0;b<a.depth;b++)c+=d[b];e.data.children[e.data.children.length-
1]===a?(d[a.depth]="&emsp;",a.span.innerHTML="<span>"+c+"&#9494;</span>"+a.data.label):(d[a.depth]="&#9475;",a.span.innerHTML="<span>"+c+"&#9507;</span>"+a.data.label);for(b=0;b<a.data.children.length;b++)h.push(a.data.children[b])}}function v(a,b,d,c){this.depth=0;this.data={id:-1,label:a,parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1};b&&(this.data.id=b);this.element=document.createElement("div");this.element.className="node";w(this,c);d&&(this.data.parent=d,this.depth=
d.depth+1,q(this,c))}function x(a,b,d){var c=this;(function(){function e(){n.style.height=f.clientHeight-(k.offsetHeight+(f.offsetHeight-f.clientHeight<<1))+"px"}function h(a){a.ancestorsInput.hidden=!1;a.descendantsInput.hidden=!1}var m=document.getElementById(a),f=document.createElement("div"),k=document.createElement("form"),n=document.createElement("form"),p=document.createElement("div"),g=[],l={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,width:b?b:"100%",height:d?d:"100%",
headerBody:k,widgetBody:f,forest:g};f.className="widget-body";f.style.width=l.width;f.style.height=l.height;k.className="header-body";k.hidden=!0;k.innerHTML="<div><div class='ancestors'><span>Ancestors</span></div><div class='descendants'><span class='ancestors'>&emsp;</span><span>Descendants</span></div><div class='self'><span class='ancestors'>&emsp;</span><span class='descendants'>&emsp;</span><span>Self</span></div></div>";n.className="forest-container";p.className="forest-body";n.appendChild(p);
f.appendChild(k);f.appendChild(n);m.appendChild(f);window.addEventListener("resize",e);c.createNode=function(a){return a.id?new v(a.label,a.id,a.parent,l):new v(a,null,null,l)};c.addNodeByReference=function(a,b){p.appendChild(a.element);b?(a.ancestorsInput.disabled=!1,b.descendantsInput.disabled=!1,a.data.parent=b,a.depth=b.depth+1,b.data.children.push(a),q(a,l),b.element.appendChild(a.element),k.hidden&&(k.hidden=!1,u(g,h))):g.push(a);e()};c.addNode=function(a){a=c.createNode(a);p.appendChild(a.element);
a.data.parent?(a.ancestorsInput.disabled=!1,a.data.parent.descendantsInput.disabled=!1,a.data.parent.data.children.push(a),q(a,l),a.data.parent.element.appendChild(a.element),k.hidden&&(k.hidden=!1,u(g,h))):g.push(a);e();return a};c.getUserSelectedNodes=function(){return l.userSelectedNodes}})()}r.prototype.create=function(a,b,d){return a?new x(a,b,d):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)};return new r}();
